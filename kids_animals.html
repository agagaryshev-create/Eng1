<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Kids English ‚Äì Animals</title>

<style>
body {
  font-family: Comic Sans MS, Arial, sans-serif;
  background: #FFF9E6;
  margin: 0;
  padding: 20px;
  text-align: center;
}

h1 {
  color: #D17B00;
}

#quiz-box {
  background: white;
  padding: 20px;
  max-width: 600px;
  margin: 20px auto;
  border-radius: 20px;
  border: 3px solid #FFD27F;
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);
}

img {
  width: 200px;
  height: 200px;
  object-fit: contain;
  margin: 10px 0;
}

.options {
  display: flex;
  flex-direction: column;
  gap: 10px;
  margin-top: 15px;
}

button.option {
  padding: 12px;
  font-size: 20px;
  border-radius: 10px;
  border: 2px solid #FFA726;
  background: #FFECB3;
  cursor: pointer;
  transition: background 0.3s;
}

button.option:hover {
  background: #FFE082;
}

#result {
  font-size: 22px;
  margin-top: 20px;
  font-weight: bold;
}

#restart {
  margin-top: 20px;
  padding: 12px 25px;
  font-size: 20px;
  border-radius: 10px;
  background: #FFD54F;
  border: 2px solid #F9A825;
  cursor: pointer;
  display: none;
}
#restart:hover {
  background: #FFEE58;
}

.back {
  margin-top: 20px;
  display: inline-block;
  padding: 10px 20px;
  background: #FFCC80;
  border-radius: 10px;
  text-decoration: none;
  color: #333;
  font-size: 18px;
  border: 2px solid #FFA726;
}
</style>
</head>

<body>

<h1>üê∂ Animals ‚Äì English for Kids</h1>
<p style="font-size:18px;">–í—ã–±–µ—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç üëá</p>

<a href="kids.html" class="back">‚Üê –ù–∞–∑–∞–¥ –∫ —Ä–∞–∑–¥–µ–ª–∞–º</a>

<div id="quiz-box">
  <h2 id="question"></h2>
  <img id="image" src="" alt="" />

  <div class="options" id="options"></div>

  <div id="result"></div>
  <button id="restart">–ò–≥—Ä–∞—Ç—å –µ—â—ë —Ä–∞–∑ üîÅ</button>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.2/firebase-app.js";
import { getFirestore, collection, addDoc, serverTimestamp } from 
"https://www.gstatic.com/firebasejs/10.13.2/firebase-firestore.js";

// Firebase
const firebaseConfig = {
  apiKey: "AIzaSyCi7KCyrHNE_D1Eq5WGb8Zrr-loh-xFyj0",
  authDomain: "engtestoge.firebaseapp.com",
  projectId: "engtestoge"
};
const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

// –õ–æ–≥ –ø–æ—Å–µ—â–µ–Ω–∏–π
async function logVisitKids() {
  try {
    await addDoc(collection(db, "visits_kids"), {
      page: "kids_animals.html",
      timestamp: serverTimestamp(),
      userAgent: navigator.userAgent
    });
  } catch (e) {
    console.error("–û—à–∏–±–∫–∞ –∑–∞–ø–∏—Å–∏ –≤–∏–∑–∏—Ç–∞:", e);
  }
}
logVisitKids();

// ---------- –¢–ï–°–¢–´ –î–õ–Ø –î–ï–¢–ï–ô ----------
const questions = [
  {
    type: "image",
    word: "cat",
    img: "https://cdn-icons-png.flaticon.com/512/1998/1998592.png",
    options: ["cat", "dog", "cow"]
  },
  {
    type: "image",
    word: "dog",
    img: "https://cdn-icons-png.flaticon.com/512/620/620851.png",
    options: ["dog", "rabbit", "fish"]
  },
  {
    type: "image",
    word: "duck",
    img: "https://cdn-icons-png.flaticon.com/512/616/616408.png",
    options: ["duck", "cow", "goat"]
  },
  {
    type: "image",
    word: "cow",
    img: "https://cdn-icons-png.flaticon.com/512/1998/1998638.png",
    options: ["cow", "cat", "bird"]
  },
  {
    type: "image",
    word: "bird",
    img: "https://cdn-icons-png.flaticon.com/512/616/616430.png",
    options: ["bird", "dog", "fish"]
  },
  {
    type: "image",
    word: "fish",
    img: "https://cdn-icons-png.flaticon.com/512/616/616394.png",
    options: ["fish", "cow", "cat"]
  }
];

let current = 0;
let score = 0;

// –ü–µ—Ä–µ–º–µ—à–∞—Ç—å –º–∞—Å—Å–∏–≤
function shuffle(arr){
  return arr.sort(() => Math.random() - 0.5);
}

shuffle(questions);

function loadQuestion() {
  const q = questions[current];

  document.getElementById("question").innerText = `–ß—Ç–æ —ç—Ç–æ –∑–∞ –∂–∏–≤–æ—Ç–Ω–æ–µ? (${current+1}/6)`;
  document.getElementById("image").src = q.img;
  document.getElementById("image").alt = q.word;

  const optBox = document.getElementById("options");
  optBox.innerHTML = "";

  shuffle(q.options).forEach(opt => {
    const btn = document.createElement("button");
    btn.className = "option";
    btn.innerText = opt;
    btn.onclick = () => checkAnswer(btn, opt === q.word);
    optBox.appendChild(btn);
  });

  // –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã –Ω–∞ —Å–ª—É—á–∞–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞
  optBox.style.display = "flex";
  document.getElementById("image").style.display = "block";
  document.getElementById("question").style.display = "block";
  document.getElementById("result").innerText = "";
  document.getElementById("restart").style.display = "none";
}

function checkAnswer(selectedBtn, correct) {
  const buttons = document.querySelectorAll("#options .option");

  buttons.forEach(btn => {
    btn.disabled = true; // –∑–∞–ø—Ä–µ—Ç –Ω–∞ –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –Ω–∞–∂–∞—Ç–∏–µ
    if (btn.innerText === questions[current].word) {
      btn.style.backgroundColor = "#A5D6A7"; // –∑–µ–ª—ë–Ω—ã–π –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
    }
  });

  if (!correct) {
    selectedBtn.style.backgroundColor = "#EF9A9A"; // –∫—Ä–∞—Å–Ω—ã–π –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
  } else {
    score++;
  }

  current++;

  setTimeout(() => {
    if (current < questions.length) {
      loadQuestion();
    } else {
      showResult();
    }
  }, 1000); // –∑–∞–¥–µ—Ä–∂–∫–∞ 1 —Å–µ–∫—É–Ω–¥–∞
}

function showResult() {
  document.getElementById("options").style.display = "none";
  document.getElementById("image").style.display = "none";
  document.getElementById("question").style.display = "none";

  document.getElementById("result").innerText = `–í–∞—à —Ä–µ–∑—É–ª—å—Ç–∞—Ç: ${score} –∏–∑ 6`;
  document.getElementById("restart").style.display = "block";
}

document.getElementById("restart").onclick = () => {
  current = 0;
  score = 0;
  shuffle(questions);
  loadQuestion();
};

loadQuestion();
</script>
</body>
</html>
